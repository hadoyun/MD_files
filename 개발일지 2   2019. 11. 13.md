# 개발일지 2  // 2019. 11. 13~



## 2019. 11. 13 - 더욱 

### 시계 맞추기 

``` cpp
//vodi pressSwitch() - 해당 스위치를 누르면 해당 시계의 시간이 3 시간씩 늘어난다.

void pressSwitch(vector<int>& v_clock, vector<int>& v_pushed_switch_count, int clock_switch)
{
	if (clock_switch == 0)
	{
		v_clock[0] += 3;
		v_clock[1] += 3;
		v_clock[2] += 3;

		++v_pushed_switch_count[0];
		setTwelve(v_clock);
	}
	else if (clock_switch == 1)
	{
		v_clock[3] += 3;
		v_clock[7] += 3;
		v_clock[9] += 3;
		v_clock[11] += 3;

		++v_pushed_switch_count[1];
		setTwelve(v_clock);
	}
	else if (clock_switch == 2)
	{
		v_clock[4] += 3;
		v_clock[10] += 3;
		v_clock[14] += 3;
		v_clock[15] += 3;

		++v_pushed_switch_count[2];
		setTwelve(v_clock);
	}
	else if (clock_switch == 3)
	{
		v_clock[0] += 3;
		v_clock[4] += 3;
		v_clock[5] += 3;
		v_clock[6] += 3;
		v_clock[7] += 3;

		++v_pushed_switch_count[3];
		setTwelve(v_clock);
	}
	else if (clock_switch == 4)
	{
		v_clock[6] += 3;
		v_clock[7] += 3;
		v_clock[8] += 3;
		v_clock[10] += 3;
		v_clock[12] += 3;

		++v_pushed_switch_count[4];
		setTwelve(v_clock);
	}
	else if (clock_switch == 5)
	{
		v_clock[0] += 3;
		v_clock[2] += 3;
		v_clock[14] += 3;
		v_clock[15] += 3;

		++v_pushed_switch_count[5];
		setTwelve(v_clock);
	}
	else if (clock_switch == 6)
	{
		v_clock[3] += 3;
		v_clock[14] += 3;
		v_clock[15] += 3;

		++v_pushed_switch_count[6];
		setTwelve(v_clock);
	}
	else if (clock_switch == 7)
	{
		v_clock[4] += 3;
		v_clock[5] += 3;
		v_clock[7] += 3;
		v_clock[14] += 3;
		v_clock[15] += 3;

		++v_pushed_switch_count[7];
		setTwelve(v_clock);
	}
	else if (clock_switch == 8)
	{
		v_clock[1] += 3;
		v_clock[2] += 3;
		v_clock[3] += 3;
		v_clock[4] += 3;
		v_clock[5] += 3;

		++v_pushed_switch_count[8];
		setTwelve(v_clock);
	}
	else if (clock_switch == 9)
	{
		v_clock[3] += 3;
		v_clock[4] += 3;
		v_clock[5] += 3;
		v_clock[9] += 3;
		v_clock[13] += 3;

		++v_pushed_switch_count[9];
		setTwelve(v_clock);
	}
}
```



-무려 100줄이 넘어가는 비효율 적인 코드이다. 이런 코드를 효율적으로 만들어보자.

해당 코드가 비효율적인 이유는

1. v_pushed_switch_count[i]에 값 업데이트

2.  15시나 0시를 12시로 업데이트

3.  해당 스위치의 해당 시계의 값을 업데이트

   총 3가지의 일을 한번에 처리하려고 했기 때문이다.

   **다시 한번 ,  하나의 함수에서는 하나의 일을 해야하만 한다.**



-> 해당 코드는 **하나의 함수에서는 하나의 일을 하는 함수**들을 모은 함수를 사용한다.

vector<int> vClocksPerSwitch[] 로 각 스위치를 누르면 업데이트 되는 시계의 값을 저장해놓는다.

void ElapseTime() 매개변수로 받은 vClocks를 integer 값으로 받은 iswitch 인덱스 번째의 값을 + 3 혹은 -3 한다.

(버튼을 눌렀을 때 +3, 그렇지 않았을 때 -3)

```cpp
#include <vector>

using namespace std;

vector<int> vClocksPerSwitch[]
{
	{ 0, 1, 2 },			//	0
	{ 3, 7, 9, 11 },		//	1
	{ 4, 10, 14, 15 },		//	2
	{ 0, 4, 5, 6, 7 },		//	3
	{ 6, 7, 8, 10, 12 },	//	4
	{ 0, 2, 14, 15 },		//	5
	{ 3, 14, 15 },			//	6
	{ 4, 5, 7, 14, 15 },	//	7	
	{ 1, 2, 3, 4, 5 },		//	8
	{ 3, 4, 5, 9, 13 },		//	9
};

void ElapseTime(vector<int>& vClocks, int iSwitch, bool bGoForth)
{
	for (auto& iClock : vClocksPerSwitch[iSwitch])
	{
		if (bGoForth)
		{
			vClocks[iClock] += 3;
		}
		else
		{
			vClocks[iClock] -= 3;
		}
	}
}

void PressSwitch(vector<int>& vClocks, vector<int>& vPressedCountPerSwitch, int iSwitch)
{
	ElapseTime(vClocks, iSwitch, true);

	++vPressedCountPerSwitch[iSwitch];

	LimitClockTimeForSwitch(vClocks, iSwitch);
}

//(UnPress일때는 bool 변수 하나만 바꿔 주면 된다.)
void UnPressSwitch(vector<int>& vClocks, vector<int>& vPressedCountPerSwitch, int iSwitch)
{
	ElapseTime(vClocks, iSwitch, true);

	++vPressedCountPerSwitch[iSwitch];

	LimitClockTimeForSwitch(vClocks, iSwitch);
}
```

